(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{289:function(s,n,a){"use strict";a.r(n);var e=a(13),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"vue3环境搭建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue3环境搭建"}},[s._v("#")]),s._v(" Vue3环境搭建")]),s._v(" "),n("p",[s._v("Vue3中使用"),n("code",[s._v("pnpm")]),s._v(" "),n("code",[s._v("workspace")]),s._v("来实现"),n("code",[s._v("monorepo")])]),s._v(" "),n("h2",{attrs:{id:"一、全局安装pnpm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、全局安装pnpm"}},[s._v("#")]),s._v(" 一、全局安装pnpm")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm instanll pnpm -g\n\npnpm init -y\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"二、创建-npmrc文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、创建-npmrc文件"}},[s._v("#")]),s._v(" 二、创建.npmrc文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("shamefully-hoist = true\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这里可以尝试一下安装Vue3，"),n("code",[s._v("pnpm install vue@next")]),s._v(" 此时默认情况下Vue3中依赖的模块不会被提升到node_modules下，添加羞耻的提升可以将Vue3所依赖的模块提升到node_modules中")]),s._v(" "),n("h2",{attrs:{id:"三、目录结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、目录结构"}},[s._v("#")]),s._v(" 三、目录结构")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("packages\n - reactivity  // Vue3响应式api逻辑代码\n - runtime-core  // Vue3虚拟节点，创建节点，diff算法，生命周期等逻辑代码\n - runtime-dom  // Vue3渲染器createRenderer，以及渲染器的配置代码\n - shared  // Vue3公共方法文件\nscripts\n - dev.js\n.npmrc\npnpm-workspace.yaml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"四、打包配置-dev-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、打包配置-dev-js"}},[s._v("#")]),s._v(" 四、打包配置（dev.js）")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const args = require('minimist')(process.argv.slice(2));\nconst { build } = require('esbuild');\nconst { resolve } = require('path');\nconst target = args._[0] || 'reactivity';\nconst format = args.f || 'global';\n\nconst pkg = require(resolve(__dirname, `../packages/${target}/package.json`));\n// iife 立即执行函数\n// cjs node中的模块\n// esm 浏览器中的esmodule模块\nconst outputformat = format.startsWith('global')\n  ? 'iife'\n  : format === 'cjs'\n  ? 'cjs'\n  : 'esm';\n\nconst outfile = resolve(\n  __dirname,\n  `../packages/${target}/dist/${target}.${format}.js`\n);\n\nbuild({\n  entryPoints: [resolve(__dirname, `../packages/${target}/src/index.ts`)],\n  outfile,\n  bundle: true,\n  sourcemap: true,\n  format: outputformat,\n  globalName: pkg.buildOptions?.name,\n  platform: format === 'cjs' ? 'node' : 'browser',\n  watch: {\n    onRebuild(error) {\n      if (!error) {\n        console.log(error);\n      }\n    },\n  },\n}).then(() => {\n  console.log('watching----');\n});\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br")])]),n("h2",{attrs:{id:"五、运行的命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五、运行的命令"}},[s._v("#")]),s._v(" 五、运行的命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('"dev": "node scripts/dev.js reactivity -f global",\n"dev:runtimeDOM": "node scripts/dev.js runtime-dom -f global",\n"dev:runtimeCORE": "node scripts/dev.js runtime-core -f global"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"六、各个包的package-json配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#六、各个包的package-json配置"}},[s._v("#")]),s._v(" 六、各个包的package.json配置")]),s._v(" "),n("h3",{attrs:{id:"_1-reactivity"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-reactivity"}},[s._v("#")]),s._v(" 1.reactivity")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n  "name": "@vue/reactivity",\n  "version": "1.0.0",\n  "description": "",\n  "main": "index.js",\n  "keywords": [],\n  "author": "",\n  "license": "ISC",\n  "buildOptions": {\n    "name": "VueReactivity",\n    "formats": [\n      "global",\n      "cjs",\n      "esm-bundler"\n    ]\n  }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h3",{attrs:{id:"_2-runtime-core"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-runtime-core"}},[s._v("#")]),s._v(" 2.runtime-core")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n  "name": "@vue/runtime-core",\n  "version": "1.0.0",\n  "description": "",\n  "main": "index.js",\n  "keywords": [],\n  "author": "",\n  "license": "ISC",\n  "buildOptions": {\n    "name": "VueRuntimeCORE",\n    "formats": [\n      "cjs",\n      "esm-bundler"\n    ]\n  }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("h3",{attrs:{id:"_3-runtime-dom"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-runtime-dom"}},[s._v("#")]),s._v(" 3.runtime-dom")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n  "name": "@vue/runtime-dom",\n  "version": "1.0.0",\n  "description": "",\n  "main": "index.js",\n  "keywords": [],\n  "author": "",\n  "license": "ISC",\n  "buildOptions": {\n    "name": "VueRuntimeDOM",\n    "formats": [\n      "cjs",\n      "esm-bundler",\n      "global"\n    ]\n  }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h3",{attrs:{id:"_4-shared"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-shared"}},[s._v("#")]),s._v(" 4.shared")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n  "name": "@vue/shared",\n  "version": "1.0.0",\n  "description": "",\n  "main": "index.js",\n  "keywords": [],\n  "author": "",\n  "license": "ISC",\n  "buildOptions": {\n    "formats": [\n      "cjs",\n      "esm-bundler"\n    ]\n  }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);