# 为什么需要微前端

微前端就是将不同的功能按照不同的维度拆分成多个子应用。通过主应用来加载这些子应用。

微前端的核心在于拆**,** 拆完后再合，实现分而治之！

### 1.微前端解决的问题

* 不同团队（技术栈不同），同时开发一个应用

* 每个团队开发的模块都可以独立开发，独立部署

* 实现增量迁移

### 2.如何实现微前端

我们可以将一个应用划分成若干个子应用，将子应用打包成一个个的模块。当路径切换时加载不同的子应用。这样每个子应用都是独立的，技术栈也不用做限制了！

从而解决了前端协同开发问题。

### 3.实现微前端技术方案

采用何种方案进行应用拆分？

采用何种方式进行应用通信？

应用之间如何进行隔离？

**1）iframe**

* 微前端的最简单方案，通过iframe加载子应用。

* 通信可以通过postMessage进行通信。

* 完美的沙箱机制自带应用隔离。

*缺点：用户体验差 （弹框只能在**iframe**中、在内部切换刷新就会丢失状态）*

**2）Web Components**

* 将前端应用程序分解为自定义 HTML 元素。

* 基于CustomEvent实现通信

* Shadow DOM天生的作用域隔离

*缺点：浏览器支持问题、学习成本、调试困难、修改样式困难等问题。*

**3）single-spa**

* single-spa 通过路由劫持实现应用的加载（采用SystemJS），提供应用间公共组件加载及公共业务逻辑处理。子应用需要暴露固定的钩子 **bootstrap**、**mount**、 **unmount**）接入协议。

* 基于props主子应用间通信

* 无沙箱机制，需要实现自己实现JS沙箱以及CSS沙箱

*缺点：学习成本、无沙箱机制、需要对原有的应用进行改造、子应用间相同资源重复加载问题。*

**4）Module federation**

* 通过模块联邦将组件进行打包导出使用

* 共享模块的方式进行通信

* 无CSS沙箱和JS沙箱

*缺点：需要**webpack5**。*

